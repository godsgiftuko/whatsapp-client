<div class="container-fluid">
    <div class="message-wrapper">
        <table id="table_id" class="display">
            <thead>
                <tr>
                    <th>Identifier</th>
                    <th>User</th>
                    <th>Message</th>
                </tr>
            </thead>
        </table>
    </div>
</div>

<script>
    $(document).ready(function () {
        const socketIo = io();


        $.ajax({
            url: '/chats',
            method: 'GET',
            success(data) {
                console.log(data)
                $('#table_id').DataTable({
                    paging: true,
                    sort: true,
                    searching: true,
                    data: data,
                    columns: [
                        { 'data': 'contactId' },
                        { 'data': 'contactName' },
                        { 'data': 'messages' },
                    ]
                })
                // data.map((each) => {
                //     const { contactId, contactName, messages } = each
                //     const message = messages.map((msg) => msg.message);
                //     $('#table_id tbody').append(
                //         `
                //       <tr>
                //      <td>${contactName}</td>
                //      <td>${message}</td>
                //  </tr>
                //      `
                //     )

                // })

            }



        })

        ocketIo.on("message", (socket) => {
            console.log(socket)
        });



    })
</script>